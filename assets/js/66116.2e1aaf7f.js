(self.webpackChunkchzhshch_blog=self.webpackChunkchzhshch_blog||[]).push([[66116],{85616:(e,t,a)=>{(()=>{"use strict";var t={d:(e,a)=>{for(var n in a)t.o(a,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:a[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},n={};t.r(n),t.d(n,{Audio:()=>q,AudioPlayer:()=>he,AudioPlayerControlSprite:()=>y,PlayListContext:()=>F,PlayListPanel:()=>je,PlayListProvider:()=>xe});const i=a(85893),s=a(67294);function r(...e){const t=[];for(const a of e)if(a)if("string"!=typeof a)for(const e in a)a[e]&&t.push(e);else t.push(a);return t.join(" ")}const o=10,l={paused:"paused",playing:"playing",stopped:"stopped"},c={all:"all",none:"none",one:"one"},{none:u,all:d,one:p}=c,m=[u,d,p],f={activeIndex:0,isMuted:!1,isShuffleOn:!1,isTrackListOpen:!0,repeatingState:u};function h(e){const{className:t,imageId:a}=e;return(0,i.jsx)("svg",{className:t,children:(0,i.jsx)("use",{xlinkHref:a})})}const b={hidden:"e05e18"},v="audio-player-icon-id-prefix-",x="#5a5a5a",_="0 0 24 24",g="http://www.w3.org/2000/svg";function y(){return(0,i.jsxs)("svg",{className:b.hidden,children:[(0,i.jsx)("symbol",{id:`${v}button-pause-playlist`,viewBox:_,xmlns:g,children:(0,i.jsx)("path",{d:"M14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.84-5 6.7v2.07c4-.91 7-4.49 7-8.77 0-4.28-3-7.86-7-8.77M16.5 12c0-1.77-1-3.29-2.5-4.03V16c1.5-.71 2.5-2.24 2.5-4M3 9v6h4l5 5V4L7 9H3z",fill:"#4285f4"})}),(0,i.jsx)("symbol",{id:`${v}button-pause`,viewBox:_,xmlns:g,children:(0,i.jsx)("path",{d:"M14 19h4V5h-4M6 19h4V5H6v14z",fill:x})}),(0,i.jsx)("symbol",{id:`${v}button-play`,viewBox:_,xmlns:g,children:(0,i.jsx)("path",{d:"M8 5.14v14l11-7-11-7z",fill:x})}),(0,i.jsx)("symbol",{id:`${v}button-track-list`,viewBox:"-1 -1 23 23",xmlns:g,children:(0,i.jsx)("path",{d:"M19 9H2v2h17V9m0-4H2v2h17V5M2 15h13v-2H2v2m15-2v6l5-3-5-3z",fill:x})}),(0,i.jsx)("symbol",{id:`${v}button-prev-track`,viewBox:_,xmlns:g,children:(0,i.jsx)("path",{d:"M6 6h2v12H6zm3.5 6l8.5 6V6z",fill:x})}),(0,i.jsx)("symbol",{id:`${v}button-next-track`,viewBox:_,xmlns:g,children:(0,i.jsx)("path",{d:"M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z",fill:x})}),(0,i.jsx)("symbol",{id:`${v}button-repeat`,viewBox:_,xmlns:g,children:(0,i.jsx)("path",{d:"M17 17H7v-3l-4 4 4 4v-3h12v-6h-2M7 7h10v3l4-4-4-4v3H5v6h2V7z",fill:x})}),(0,i.jsx)("symbol",{id:`${v}button-repeat-one`,viewBox:_,xmlns:g,children:(0,i.jsx)("path",{d:"M13 15V9h-1l-2 1v1h1.5v4m5.5 2H7v-3l-4 4 4 4v-3h12v-6h-2M7 7h10v3l4-4-4-4v3H5v6h2V7z",fill:x})}),(0,i.jsx)("symbol",{id:`${v}button-shuffle`,viewBox:_,xmlns:g,children:(0,i.jsx)("path",{d:"M14.83 13.41l-1.41 1.41 3.13 3.13L14.5 20H20v-5.5l-2.04 2.04-3.13-3.13M14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4m-9.41 5.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41z",fill:x})}),(0,i.jsx)("symbol",{id:`${v}button-sound-off`,viewBox:_,xmlns:g,children:(0,i.jsx)("path",{d:"M12 4L9.91 6.09 12 8.18M4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.26c-.67.51-1.42.93-2.25 1.17v2.07c1.38-.32 2.63-.95 3.68-1.81L19.73 21 21 19.73l-9-9M19 12c0 .94-.2 1.82-.54 2.64l1.51 1.51A8.916 8.916 0 0 0 21 12c0-4.28-3-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71m-2.5 0c0-1.77-1-3.29-2.5-4.03v2.21l2.45 2.45c.05-.2.05-.42.05-.63z",fill:x})}),(0,i.jsx)("symbol",{id:`${v}button-sound-on`,viewBox:_,xmlns:g,children:(0,i.jsx)("path",{d:"M14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.84-5 6.7v2.07c4-.91 7-4.49 7-8.77 0-4.28-3-7.86-7-8.77M16.5 12c0-1.77-1-3.29-2.5-4.03V16c1.5-.71 2.5-2.24 2.5-4M3 9v6h4l5 5V4L7 9H3z",fill:x})}),(0,i.jsx)("symbol",{id:`${v}button-download`,viewBox:_,xmlns:g,children:(0,i.jsx)("path",{d:"M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z",fill:x})}),(0,i.jsx)("symbol",{id:`${v}play-list-menu`,viewBox:_,xmlns:g,children:(0,i.jsx)("path",{d:"M15 6H3v2h12V6zm0 4H3v2h12v-2zM3 16h8v-2H3v2zM17 6v8.18c-.31-.11-.65-.18-1-.18-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3V8h3V6h-5z",fill:x})}),(0,i.jsx)("symbol",{id:`${v}play-list-plus`,viewBox:"-1 -1 23 23",xmlns:g,children:(0,i.jsx)("path",{d:"M14 10H2v2h12v-2zm0-4H2v2h12V6zm4 8v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zM2 16h8v-2H2v2z",fill:x})}),(0,i.jsx)("symbol",{id:`${v}trash-bin`,viewBox:_,xmlns:g,children:(0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z",fill:x})})]})}const k={div:"div",span:"span"},j="bff2b5",C="a45085",L="fde0b7",w="ac7b4a",N="ab5ee0";function S(e){const{onClick:t,imageId:a,isActive:n,ariaLabel:s,className:o,tag:l,hasBorder:c,isHideForNarrow:u}=e,d=r(j,{[C]:n,[L]:c,[N]:u},o),p=(0,i.jsx)(h,{className:w,imageId:`#${v}${a}`});return l===k.div?(0,i.jsx)("div",{className:d,children:p}):l===k.span?(0,i.jsx)("span",{className:d,children:p}):(0,i.jsx)("button",{"aria-label":s,className:d,onClick:t,type:"button",children:(0,i.jsx)(h,{className:w,imageId:`#${v}${a}`})})}function M(e){return{minutes:String(Math.floor(e/60)),seconds:String(Math.floor(e%60)).padStart(2,"0")}}const P={time:"c7b08a"};function T(e){const{currentTime:t,fullTime:a,className:n}=e,s=r(P.time,n),o=function(e,t){const{minutes:a,seconds:n}=M(e),{minutes:i,seconds:s}=M(t);return`${a}:${n} / ${i}:${s}`}(t,a);return(0,i.jsx)("span",{className:s,children:o})}const I={range_bar:"e0b58b",wrapper__active:"d6d969",wrapper__disable:"c0ae57",progress_bar__wrapper:"cc7be8",progress_bar:"c44fc5",point_bar__wrapper:"eee1d0",point_bar:"f79532",input_range:"f9d0be",range_bar__hide_for_narrow:"e13c85"},V={defaultValue:0,max:1,min:0,step:.001};function H(e){const[t,a]=(0,s.useState)(!1),n=(0,s.useRef)(null),{className:o,isDisable:l,progress:c,onChange:u,ariaLabel:d,isHideForNarrow:p}=e,m=r(I.range_bar,o,{[I.wrapper__active]:t,[I.wrapper__disable]:!0===l,[I.range_bar__hide_for_narrow]:p});return(0,i.jsxs)("div",{className:m,onPointerDown:function(){a(!0)},onPointerUp:function(){a(!1)},children:[(0,i.jsx)("div",{className:I.progress_bar__wrapper,children:(0,i.jsx)("div",{className:I.progress_bar,style:{transform:`translateZ(0) scaleX(${c||0})`}})}),(0,i.jsx)("div",{className:I.point_bar__wrapper,children:(0,i.jsx)("div",{className:I.point_bar,style:{left:100*c+"%"}})}),(0,i.jsx)("input",{"aria-label":d,className:I.input_range,defaultValue:V.defaultValue,max:V.max,min:V.min,onChange:function(){u(function(){const{current:e}=n;return e?Number.parseFloat(e.value):0}())},ref:n,step:V.step,type:"range"})]})}const B=["nexttrack","pause","play","previoustrack","seekbackward","seekforward"];function z(e,t){var a;if("undefined"!=typeof navigator&&"undefined"!=typeof MediaMetadata&&"mediaSession"in navigator&&(function(){if("undefined"!=typeof navigator&&"undefined"!=typeof MediaMetadata&&"mediaSession"in navigator){navigator.mediaSession.metadata=null;for(const e of B)navigator.mediaSession.setActionHandler(e,null)}}(),navigator.mediaSession.metadata=new MediaMetadata(e),t))for(const n of B)navigator.mediaSession.setActionHandler(n,null!==(a=t[n])&&void 0!==a?a:null)}function $(e){return function(){e.currentTime=0,e.addEventListener("canplay",(function t(){e.removeEventListener("canplay",t,!1),e.play().then((()=>{e.pause(),e.currentTime=0}))}),!1)}}function A(e,t){return e.src===t.src}function O(e){const{src:t,mediaMetadata:a,content:n}=e;let i={src:t};return a&&(i={...i,mediaMetadata:a}),n&&(i={...i,content:n}),i}const E=function(){const e={name:"",trackList:[]};return{createPlayList:()=>e,deletePlayList:e=>new Error("deletePlayList: overwrite me"),getAllPlayLists:()=>[e],getTrackById:e=>null,isInitialized:!1,removeTrackById:e=>new Error("removeTrack: overwrite me"),updatePlayList:(e,t)=>new Error("updatePlayList: overwrite me")}}(),F=(0,s.createContext)(E);function R(){return Math.round(1e6*Math.random()).toString(16)}function W(){return Math.random()>.5?1:-1}const D="Play list",U="No name playlist",Z={content_wrapper:"b8f0f4",add_track_to_play_list_button:"cf10f9",select_play_list:"f2a1b7"};function J(e){const{className:t,track:a}=e,n=r(Z.add_track_to_play_list_button,t),o=(0,s.useContext)(F),[l,c]=(0,s.useState)(0),{getAllPlayLists:u,updatePlayList:d,removeTrackById:p,isInitialized:m}=o,f=u(),h="-1",b=(0,s.useCallback)((e=>{const t=e.currentTarget,n=Number.parseInt(t.value,10),i=f.at(n),{src:s,mediaMetadata:r,content:o,preload:u,duration:m}=a;if(c(l+1),!i)return;const b=i.trackList.find((e=>A(e,a)));if(b)return void p(b.id);let v={id:R(),src:s};r&&(v={...v,mediaMetadata:r}),"string"==typeof o&&(v={...v,content:o}),"string"==typeof u&&(v={...v,preload:u}),"number"==typeof m&&(v={...v,duration:m});const x=[v,...i.trackList];d(i,{...i,trackList:x}),t.value=h}),[f,d,a,h,p,c,l]);return m?(0,i.jsxs)("label",{className:Z.content_wrapper,children:[(0,i.jsx)(S,{ariaLabel:"play list menu",className:n,imageId:"play-list-menu"}),(0,i.jsxs)("select",{className:Z.select_play_list,defaultValue:h,onChange:b,children:[(0,i.jsx)("option",{disabled:!0,value:h,children:"\xa0"}),f.map(((e,t)=>{const n=e.trackList.find((e=>A(e,a))),s=e.name.trim()||U,r=`${n?"[\u2713]":"[_]"} ${s}`;return(0,i.jsx)("option",{value:t,children:r},String(t)+s)}))]},l)]}):null}const X={audio_tag:"e22549",audio:"ce6c17",time:"e154e9",sound_range:"cae029",download_button:"a3d9e7"};function q(e){const{className:t,downloadFileName:a,duration:n=0,mediaMetadata:c,onDidMount:u,preload:d="auto",src:p,useRepeatButton:m=!1}=e,f=(0,s.useRef)(null),[h,b]=(0,s.useState)(0),[v,x]=(0,s.useState)(n),[_,g]=(0,s.useState)(1),[y,j]=(0,s.useState)(!1),[C,L]=(0,s.useState)(l.paused),[w,N]=(0,s.useState)(!1),M=y||0===_?"button-sound-off":"button-sound-on";function P(){const e=f.current;if(e)return e;throw new Error("Audio tag is not exists")}function I(){P().play()}function V(){P().currentTime+=o}function B(){P().currentTime-=o}(0,s.useEffect)((()=>{const e=P();u&&u(e)}),[u]);const A=c?{mediaMetadata:c,src:p}:{src:p};return(0,i.jsxs)("div",{className:r(X.audio,t),children:[(0,i.jsx)("audio",{className:X.audio_tag,onEnded:function(){if(P().currentTime=0,w)return b(0),void I();L(l.paused),b(0)},onLoadedMetadata:function(){const e=P();b(0),x(e.duration),e.volume=_},onPause:function(){L(l.paused)},onPlay:function(){L(l.playing);const e={seekbackward:B,seekforward:V,stop:$(P())};z(c||{title:p},e)},onTimeUpdate:function(){const e=P();b(e.currentTime)},onVolumeChange:function(){const e=P();j(e.muted),g(e.volume)},preload:d,ref:f,src:p,volume:_,children:(0,i.jsx)("track",{kind:"captions",src:p})}),C===l.playing?(0,i.jsx)(S,{ariaLabel:"pause",imageId:"button-pause",onClick:function(){P().pause()}}):(0,i.jsx)(S,{ariaLabel:"play",imageId:"button-play",onClick:I}),m?(0,i.jsx)(S,{ariaLabel:"repeat",imageId:"button-repeat",isActive:w,onClick:function(){N(!w)}}):null,(0,i.jsx)(T,{className:X.time,currentTime:h,fullTime:v}),(0,i.jsx)(H,{ariaLabel:"progress bar",onChange:function(e){const t=P(),a=e*v;t.currentTime=a,b(a)},progress:h/v}),(0,i.jsx)(S,{ariaLabel:"switch-sound",imageId:M,isHideForNarrow:!0,onClick:function(){const e=P(),t=!e.muted;e.muted=t,j(t)}}),(0,i.jsx)(H,{ariaLabel:"volume bar",className:X.sound_range,isHideForNarrow:!0,onChange:function(e){P().volume=e,g(e)},progress:_}),(0,i.jsx)("a",{"aria-label":"download",className:X.download_button,download:null==a||a,href:p,children:(0,i.jsx)(S,{ariaLabel:"download",imageId:"button-download",tag:k.span})}),(0,i.jsx)(J,{track:A})]})}function G(e,t,a){const n=(t+a)%e;return n<0?n+e:n}function K(e,t,a){if(t-e<1)return e;const n=e+Math.floor(Math.random()*(t-e));return a&&a.includes(n)?K(e,t,a):n}const Q={spinner_image:"d9b0ab","loading-spinner":"f9ab9b",spinner_wrapper:"c82f2f","show-spinner-animation":"c39598",spinner_wrapper__static:"da10e0"},Y={absolute:"absolute",fixed:"fixed",relative:"relative",static:"static"},{size:ee}={size:48};function te(e){const{size:t,lineWidth:a,arcColor:n,circleColor:s,isShow:o,wrapperWidth:l,wrapperHeight:c,position:u,wrapperColor:d,wrapperPadding:p,className:m}=e;if(!1===o)return null;const f=null!=u?u:Y.static,h=null!=t?t:ee,b={borderColor:s,borderTopColor:n,borderWidth:a,height:h,width:h},v={backgroundColor:d,height:c,minHeight:h,minWidth:h,padding:p,position:f,width:l};return(0,i.jsx)("div",{className:r(Q.spinner_wrapper,m,{[Q.spinner_wrapper__static]:f===Y.static}),style:v,children:(0,i.jsx)("div",{className:Q.spinner_image,style:b})})}const ae={audio_player_head_playing_bar:"bd925c",time:"df7adc",volume_bar:"da6e9c"};function ne(e){const{trackCurrentTime:t,trackFullTime:a,onClickMuteVolume:n,isMuted:s,trackVolume:r,onChangeProgressBar:o,onChangeVolumeBar:l}=e,c=s||0===r?"button-sound-off":"button-sound-on",u=0!==a;return(0,i.jsxs)("div",{className:ae.audio_player_head_playing_bar,children:[(0,i.jsx)(T,{className:ae.time,currentTime:t,fullTime:a}),(0,i.jsx)(H,{ariaLabel:"progress bar",isDisable:!u,onChange:o,progress:u?t/a:0}),(0,i.jsx)(S,{ariaLabel:"switch-sound",className:"",imageId:c,isHideForNarrow:!0,onClick:n}),(0,i.jsx)(H,{ariaLabel:"volume bar",className:ae.volume_bar,isHideForNarrow:!0,onChange:l,progress:r})]})}const ie={audio_player_head_controls:"b31ddf"},{one:se,all:re}=c;function oe(e){const{onClickShuffle:t,onClickRepeat:a,onClickPrevTrack:n,onClickPlay:s,onClickNextTrack:r,onClickTrackList:o,playingState:c,isShuffleOn:u,repeatingState:d,isTrackListOpen:p}=e,m=c===l.playing;return(0,i.jsxs)("div",{className:ie.audio_player_head_controls,children:[(0,i.jsx)(S,{ariaLabel:"shuffle",imageId:"button-shuffle",isActive:u,onClick:t}),(0,i.jsx)(S,{ariaLabel:"repeat",imageId:d===se?"button-repeat-one":"button-repeat",isActive:d===se||d===re,onClick:a}),(0,i.jsx)(S,{ariaLabel:"prev",imageId:"button-prev-track",onClick:n}),m?(0,i.jsx)(S,{ariaLabel:"pause",imageId:"button-pause",onClick:s}):(0,i.jsx)(S,{ariaLabel:"play",imageId:"button-play",onClick:s}),(0,i.jsx)(S,{ariaLabel:"next",imageId:"button-next-track",onClick:r}),(0,i.jsx)(S,{ariaLabel:"track-list",imageId:"button-track-list",isActive:p,onClick:o})]})}const le={audio_player_head:"fa9e1a",spinner:"bcf8d9"};function ce(e){const{onClickShuffle:t,onClickRepeat:a,onClickPrevTrack:n,onClickPlay:s,onClickNextTrack:r,onClickTrackList:o,onClickMuteVolume:l,onChangeProgressBar:c,onChangeVolumeBar:u,isMuted:d,playingState:p,isShuffleOn:m,repeatingState:f,isTrackListOpen:h,trackCurrentTime:b,trackVolume:v,trackFullTime:x,isLoading:_}=e;return(0,i.jsxs)("div",{className:le.audio_player_head,children:[(0,i.jsx)(te,{className:le.spinner,isShow:_,lineWidth:3,position:"absolute",size:26,wrapperHeight:26,wrapperPadding:0,wrapperWidth:26}),(0,i.jsx)(oe,{isShuffleOn:m,isTrackListOpen:h,onClickNextTrack:r,onClickPlay:s,onClickPrevTrack:n,onClickRepeat:a,onClickShuffle:t,onClickTrackList:o,playingState:p,repeatingState:f}),(0,i.jsx)(ne,{isMuted:d,onChangeProgressBar:c,onChangeVolumeBar:u,onClickMuteVolume:l,trackCurrentTime:b,trackFullTime:x,trackVolume:v})]})}const ue={audio_player_track_list:"d6f4a6"},de={audio_player_track_list_item:"b48888",audio_player_track_list_item__active:"b28ca0",button:"bbcf1f",button_image__active:"ef10a4",button_image:"a7a82b",content:"c4d018",track_title:"bef821",audio_tag:"b3c7d7",track_time:"bee42b",play_list_menu_button:"c0f54f"};function pe(e){const{isCurrentTrack:t,activeIndex:a,track:n,playingState:o,onClickPlay:c,setActiveIndex:u,isLoading:d,playByIndex:p}=e,{src:m,duration:f=0,preload:b="auto"}=n,[x,_]=(0,s.useState)(f),{minutes:g,seconds:y}=M(x),k=(0,s.useRef)(null),j=function(e){const{content:t,mediaMetadata:a,src:n}=e;if(t)return t;const i=null==a?void 0:a.title;if(i)return i;const s=n.split("/").pop();if(!s)return"";const r=s.lastIndexOf(".");return r>0?s.slice(0,r):s}(n),C=(0,i.jsx)(te,{isShow:d,lineWidth:4,position:"absolute",size:30,wrapperPadding:0}),L=r(de.audio_player_track_list_item,{[de.audio_player_track_list_item__active]:t});function w(){u(a)}function N(){p(a)}return(0,i.jsxs)("li",{className:L,children:[(0,i.jsx)("audio",{className:de.audio_tag,muted:!0,onLoadedMetadata:function(){const e=function(){const e=k.current;if(e)return e;throw new Error("Audio tag is not exists")}();_(e.duration)},preload:b,ref:k,src:m}),function(){const e=`#${v}button-play`,a=`#${v}button-pause-playlist`,n="play";return o===l.playing?t?(0,i.jsxs)("button",{"aria-label":n,className:de.button,onClick:c,type:"button",children:[C,(0,i.jsx)(h,{className:de.button_image__active,imageId:a})]}):(0,i.jsx)("button",{"aria-label":n,className:de.button,onClick:w,type:"button",children:(0,i.jsx)(h,{className:de.button_image,imageId:e})}):t?(0,i.jsxs)("button",{"aria-label":n,className:de.button,onClick:c,type:"button",children:[C,(0,i.jsx)(h,{className:de.button_image,imageId:e})]}):(0,i.jsx)("button",{"aria-label":n,className:de.button,onClick:N,type:"button",children:(0,i.jsx)(h,{className:de.button_image,imageId:e})})}(),(0,i.jsx)("div",{className:de.content,children:(0,i.jsx)("div",{className:de.track_title,children:j})}),(0,i.jsx)("div",{className:de.track_time,children:`${g}:${y}`}),(0,i.jsx)(J,{className:de.play_list_menu_button,track:n})]})}function me(e){const{activeIndex:t,trackList:a,playingState:n,onClickPlay:s,setActiveIndex:r,isLoading:o,playByIndex:l}=e;return(0,i.jsx)("ul",{className:ue.audio_player_track_list,children:a.map(((e,a)=>{const c=t===a;return(0,i.jsx)(pe,{activeIndex:a,isCurrentTrack:c,isLoading:!!o&&c,onClickPlay:s,playByIndex:l,playingState:n,setActiveIndex:r,track:e},e.src)}))})}const fe={audio_tag:"e2ec9c"};function he(e){var t,a;const{defaultState:n,className:r,onDidMount:u,trackList:d}=e,p=function(e){return e?{...f,...e}:f}(n),h=null!==(a=null===(t=d.at(0))||void 0===t?void 0:t.duration)&&void 0!==a?a:0,[b,v]=(0,s.useState)(0),[x,_]=(0,s.useState)(h),[g,y]=(0,s.useState)(1),[k,j]=(0,s.useState)(p.isMuted),[C,L]=(0,s.useState)(l.paused),[w,N]=(0,s.useState)(p.activeIndex),[S,M]=(0,s.useState)(p.isShuffleOn),[P,T]=(0,s.useState)(p.repeatingState),[I,V]=(0,s.useState)(p.isTrackListOpen),[H,B]=(0,s.useState)(!1),[A,O]=(0,s.useState)(!1),E=(0,s.useRef)(null);function F(){return E.current||(console.error("Audio tag is not exists"),document.createElement("audio"))}function R(){return d[w]||null}function W(e){N(e),B(!0),v(0),_(0),X()}function D(){W(G(d.length,w,1))}function U(){W(G(d.length,w,-1))}function Z(){F().currentTime+=o}function J(){F().currentTime-=o}function X(){const e=R();if(!e)return;const{mediaMetadata:t}=e;t&&z(t,{nexttrack:D,previoustrack:U,seekbackward:J,seekforward:Z,stop:$(F())})}function q(){const e=R();return e?e.src:""}function Q(){const e=F();e.paused?e.play():e.pause()}return(0,s.useEffect)((()=>{const e=F();u&&u(e)}),[u]),(0,i.jsxs)("div",{className:null!=r?r:"",children:[(0,i.jsx)("audio",{autoPlay:C===l.playing,className:fe.audio_tag,muted:k,onCanPlay:function(){A&&(O(!1),Q())},onEnded:function(){const{one:e,all:t,none:a}=c,n=d.length;if(O(!0),n<=1)return N(0),void v(0);if(S)W(K(0,n,[w]));else{if(P===e)return O(!1),void Q();P!==t?w<n-1?D():(O(!1),W(0)):D()}},onLoadedMetadata:function(){const e=F();B(!1),_(e.duration),e.volume=g},onPause:function(){L(l.paused)},onPlay:function(){L(l.playing),X()},onTimeUpdate:function(){const e=F();v(e.currentTime)},onVolumeChange:function(){const e=F();j(e.muted),y(e.volume)},preload:"metadata",ref:E,src:q(),volume:g,children:(0,i.jsx)("track",{kind:"captions",src:q()})},"audio-tag"),(0,i.jsx)(ce,{isLoading:H,isMuted:k,isShuffleOn:S,isTrackListOpen:I,onChangeProgressBar:function(e){F().currentTime=e*x},onChangeVolumeBar:function(e){F().volume=e},onClickMuteVolume:function(){const e=F(),t=!e.muted;e.muted=t,j(t)},onClickNextTrack:D,onClickPlay:Q,onClickPrevTrack:U,onClickRepeat:function(){const e=(m.indexOf(P)+1)%m.length;T(m[e])},onClickShuffle:function(){M(!S)},onClickTrackList:function(){V(!I)},playingState:C,repeatingState:P,trackCurrentTime:b,trackFullTime:x,trackVolume:g}),I?(0,i.jsx)(me,{activeIndex:w,isLoading:H,onClickPlay:Q,playByIndex:function(e){N(e),B(!0);const t=F();t.addEventListener("canplay",(function e(){B(!1),t.removeEventListener("canplay",e,!1),t.play()}),!1)},playingState:C,setActiveIndex:W,trackList:d}):null]})}const be="react-audio-player-play-list-storage-key-v.1.0.0";function ve(){return[{name:D,trackList:[]}]}function xe(e){const{children:t}=e,[a,n]=(0,s.useState)(function(){if("undefined"==typeof localStorage)return ve();const e=localStorage.getItem(be);return"string"==typeof e&&e.trim()?JSON.parse(e):ve()}()),r=(0,s.useCallback)((e=>{const t=a.length;for(let n=0;n<t;n+=1){const{trackList:t}=a[n],i=t.length;for(let a=0;a<i;a+=1){const n=t[a];if(n.id===e)return n}}return null}),[a]),o=(0,s.useCallback)((()=>{const e={name:`${D} ${Array.from({length:4}).map(R).sort(W).join("").slice(0,4)}`,trackList:[]},t=[...a,e];return n(t),e}),[a,n]),l=(0,s.useCallback)((()=>[...a]),[a]),c=(0,s.useCallback)(((e,t)=>{const i=[...a],s=i.indexOf(e);return s<0?new Error("Old Play List is not exists."):(i[s]=t,n(i),t)}),[a,n]),u=(0,s.useCallback)((e=>{const t=[...a],i=t.indexOf(e);return i<0?new Error("Play List is not exists."):(t.splice(i,1),n(t),null)}),[a,n]),d=(0,s.useCallback)((e=>{const t=a.length;for(let n=0;n<t;n+=1){const t=a[n],{trackList:i}=t,s=i.length;for(let a=0;a<s;a+=1)if(i[a].id===e){const e=[...i];return e.splice(a,1),c(t,{...t,trackList:e}),null}}return new Error("Track is not exists.")}),[a,c]),p=(0,s.useMemo)((()=>({createPlayList:o,deletePlayList:u,getAllPlayLists:l,getTrackById:r,isInitialized:!0,removeTrackById:d,updatePlayList:c})),[o,l,c,u,d,r]);return(0,s.useEffect)((()=>{var e;e=a,"undefined"!=typeof localStorage&&localStorage.setItem(be,JSON.stringify(e))}),[a]),(0,i.jsx)(F.Provider,{value:p,children:t})}const _e={play_list_panel:"a7ad0a",add_play_list_wrapper:"b59941",add_play_list_button:"dd564f"},ge={play_list_container:"aec634",header_input:"f500e1",remove_play_list_button_active:"a470ec",remove_play_list_button:"e85b98",header_container:"fe1637",no_track_here:"ecef14"};function ye(e){const{playList:t}=e,{trackList:a,name:n}=t,r=(0,s.useRef)(null),o=(0,s.useContext)(F),{updatePlayList:l,deletePlayList:c,getAllPlayLists:u}=o,d=u(),p=a.length>0,m=(0,s.useCallback)((()=>{var e;l(t,{name:(null!==(e=r.current)&&void 0!==e?e:(()=>{throw new Error("Can not get input of play list name")})()).value.trim(),trackList:a})}),[l,t,a]),f=(0,s.useCallback)((()=>{c(t)}),[c,t]),h=d.length>1&&0===a.length?ge.remove_play_list_button_active:ge.remove_play_list_button;return(0,i.jsxs)("div",{className:ge.play_list_container,children:[(0,i.jsxs)("div",{className:ge.header_container,children:[(0,i.jsx)("input",{className:ge.header_input,defaultValue:n,onBlur:m,placeholder:U,ref:r,type:"text"}),(0,i.jsx)(S,{ariaLabel:"delete",className:h,imageId:"trash-bin",onClick:f})]}),p?(0,i.jsx)(he,{trackList:a.map(O)}):(0,i.jsx)("p",{className:ge.no_track_here,children:"\u2205"})]})}function ke(e,t){return(0,i.jsx)(ye,{playList:e},`${e.name}-${String(t)}`)}function je(){const e=(0,s.useContext)(F),{createPlayList:t,getAllPlayLists:a}=e,n=a();return(0,i.jsxs)("div",{className:_e.play_list_panel,children:[n.map(ke),(0,i.jsx)("div",{className:_e.add_play_list_wrapper,children:(0,i.jsx)(S,{ariaLabel:"add play list",className:_e.add_play_list_button,imageId:"play-list-plus",onClick:t})})]})}e.exports=n})()},11151:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o,a:()=>r});var n=a(67294);const i={},s=n.createContext(i);function r(e){const t=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),n.createElement(s.Provider,{value:t},e.children)}}}]);